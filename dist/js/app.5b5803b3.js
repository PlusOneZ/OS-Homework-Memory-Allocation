(function(t){function e(e){for(var c,r,s=e[0],a=e[1],u=e[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],c=!0,s=1;s<n.length;s++){var a=n[s];0!==i[a]&&(c=!1)}c&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var c={},i={app:0},o=[];function r(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=c,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)r.d(n,c,function(e){return t[e]}.bind(null,c));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/OS-Homework-Memory-Allocation/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=a;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3aa0":function(t,e,n){"use strict";n("d3c8")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),i={id:"app"};function o(t,e,n,o,r,s){var a=Object(c["M"])("Home");return Object(c["D"])(),Object(c["i"])("div",i,[Object(c["m"])(a,{page_size:r.ps,frame_amount:r.fa,instruction_amount:r.ia,onSet_inst_amount:s.setInstAmount,onSet_frame_amount:s.setFrameAmount,onSet_page_size:s.setPageSize},null,8,["page_size","frame_amount","instruction_amount","onSet_inst_amount","onSet_frame_amount","onSet_page_size"])])}var r=Object(c["fb"])("data-v-0bb9156a");Object(c["G"])("data-v-0bb9156a");var s=Object(c["m"])("div",{class:"h-5"},null,-1),a={class:"flex"},u={class:"pt-2 w-56"},l={class:"pt-2 w-56"},d=Object(c["l"])(" 单步执行 "),f=Object(c["m"])("div",{class:"w-12"},null,-1),m=Object(c["m"])("div",{class:"w-12"},null,-1),b=Object(c["m"])("div",{class:"w-12"},null,-1),_=Object(c["l"])(" 重置"),h=Object(c["m"])("span",null," 确认重置吗？这将会使指令重新生成。",-1),j={class:"dialog-footer"},O=Object(c["l"])("取 消"),p=Object(c["l"])("确 定"),v=Object(c["m"])("div",{class:"w-8"},null,-1),g=Object(c["l"])(" 类LRU（Clock 实现）"),x=Object(c["l"])(" FIFO"),y=Object(c["m"])("div",{class:"h-5"},null,-1),k=Object(c["m"])("div",{class:"w-10"},null,-1),w=Object(c["m"])("div",{class:"w-10"},null,-1),V=Object(c["m"])("div",{class:"w-10"},null,-1),M=Object(c["m"])("div",{class:"w-10"},null,-1),Q={class:"content-center align-middle text-center justify-center"},N={class:"inline-block"},I=Object(c["m"])("label",{class:"text-lg"},"向前跳转比例: ",-1),z=Object(c["m"])("div",{class:"h-10"},null,-1),D={class:"inline-block"},C=Object(c["m"])("label",{class:"text-lg"},"向后跳转比例: ",-1),F=Object(c["m"])("div",{class:"h-10"},null,-1),S=Object(c["m"])("div",{class:"h-10"},null,-1),q={class:"inline-block"},P=Object(c["m"])("label",{class:"text-lg"},"指令总数: ",-1),L=Object(c["m"])("div",{class:"h-10"},null,-1),U={class:"inline-block"},E=Object(c["m"])("label",{class:"text-lg"},"页框数目: ",-1),R=Object(c["m"])("div",{class:"h-10"},null,-1),$={class:"inline-block"},A=Object(c["m"])("label",{class:"text-lg"},"每页指令数: ",-1),T=Object(c["m"])("div",{class:"h-10"},null,-1),H={class:"dialog-footer"},G=Object(c["l"])("确定重置"),K=Object(c["l"])("取消");Object(c["E"])();var B=r((function(t,e,n,i,o,B){var J=Object(c["M"])("InstructionList"),W=Object(c["M"])("el-aside"),X=Object(c["M"])("PageView"),Y=Object(c["M"])("el-button"),Z=Object(c["M"])("el-dialog"),tt=Object(c["M"])("el-radio"),et=Object(c["M"])("el-input"),nt=Object(c["M"])("el-footer"),ct=Object(c["M"])("el-container");return Object(c["D"])(),Object(c["i"])(ct,{style:{"max-height":"100%"}},{default:r((function(){return[Object(c["m"])(W,{width:"300px"},{default:r((function(){return[Object(c["m"])(J,{ref:"instList",amount:t.instruction_amount,frame_size:t.page_size,backward_portion:t.randomness_backward,forward_portion:t.randomness_forward,onChoose_inst:t.chooseInst,colors:t.colors},null,8,["amount","frame_size","backward_portion","forward_portion","onChoose_inst","colors"])]})),_:1}),Object(c["m"])(ct,null,{default:r((function(){return[Object(c["m"])(X,{frame_count:t.frame_amount,ref:"frames"},null,8,["frame_count"]),Object(c["m"])(nt,null,{default:r((function(){return[s,Object(c["m"])("div",a,[Object(c["m"])("div",u,[Object(c["m"])("a",{href:"#"+t.current_instruction}," 当前指令："+Object(c["Q"])(t.current_instruction),9,["href"])]),Object(c["m"])("div",l," 下条指令："+Object(c["Q"])(t.next_instruction),1),Object(c["m"])(Y,{onClick:e[1]||(e[1]=function(e){t.stopTimer(),t.execute()}),type:"primary"},{default:r((function(){return[d]})),_:1}),f,Object(c["m"])(Y,{onClick:e[2]||(e[2]=function(e){return t.continueExecute(1e3)}),type:t.timer?"success":"default",id:"slow"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.timer?"暂停":"连续执行（慢一点）"),1)]})),_:1},8,["type"]),m,Object(c["m"])(Y,{onClick:e[3]||(e[3]=function(e){return t.continueExecute(100)}),type:t.timer?"success":"default",id:"fast"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.timer?"暂停":"连续执行（快一点）"),1)]})),_:1},8,["type"]),b,Object(c["m"])(Y,{onClick:e[4]||(e[4]=function(e){return t.resetVisible=!0}),type:"danger"},{default:r((function(){return[_]})),_:1}),Object(c["m"])(Z,{title:"确认重置",modelValue:t.resetVisible,"onUpdate:modelValue":e[7]||(e[7]=function(e){return t.resetVisible=e}),width:"30%"},{footer:r((function(){return[Object(c["m"])("span",j,[Object(c["m"])(Y,{onClick:e[5]||(e[5]=function(e){return t.resetVisible=!1})},{default:r((function(){return[O]})),_:1}),Object(c["m"])(Y,{type:"warning",onClick:e[6]||(e[6]=function(e){t.resetVisible=!1,t.reset()})},{default:r((function(){return[p]})),_:1})])]})),default:r((function(){return[h]})),_:1},8,["modelValue"]),v,Object(c["m"])("div",null,[Object(c["m"])(tt,{modelValue:t.algo,"onUpdate:modelValue":e[8]||(e[8]=function(e){return t.algo=e}),label:"1"},{default:r((function(){return[g]})),_:1},8,["modelValue"]),Object(c["m"])(tt,{modelValue:t.algo,"onUpdate:modelValue":e[9]||(e[9]=function(e){return t.algo=e}),label:"2"},{default:r((function(){return[x]})),_:1},8,["modelValue"])])]),y,Object(c["m"])("div",{class:"flex",onClick:e[10]||(e[10]=function(e){return t.randomnessFormVisible=!0}),id:"attribute"},[Object(c["m"])("p",null,"顺序执行｜向前跳转｜向后跳转： "+Object(c["Q"])(t.randomness_sequential+"%｜"+t.randomness_forward+"%｜"+t.randomness_backward+"%"),1),k,Object(c["m"])("p",null," 指令总数："+Object(c["Q"])(t.instruction_amount),1),w,Object(c["m"])("p",null," 页框数目："+Object(c["Q"])(t.frame_amount),1),V,Object(c["m"])("p",null," 每页指令数："+Object(c["Q"])(t.page_size),1),M,Object(c["m"])("p",null," 该进程所占页数："+Object(c["Q"])(Math.ceil(t.instruction_amount/t.page_size)),1)]),Object(c["m"])(Z,{title:"调整指令随机性",modelValue:t.randomnessFormVisible,"onUpdate:modelValue":e[18]||(e[18]=function(e){return t.randomnessFormVisible=e})},{default:r((function(){return[Object(c["m"])("div",Q,[Object(c["m"])("div",N,[I,Object(c["m"])(et,{type:"text",placeholder:"向前跳转比例",modelValue:t.randomness_forward,"onUpdate:modelValue":e[11]||(e[11]=function(e){return t.randomness_forward=e}),maxlength:"3","prefix-icon":"el-icon-top"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.randomness_forward),1)]})),_:1},8,["modelValue"])]),z,Object(c["m"])("div",D,[C,Object(c["m"])(et,{type:"text",placeholder:"向后跳转比例",modelValue:t.randomness_backward,"onUpdate:modelValue":e[12]||(e[12]=function(e){return t.randomness_backward=e}),maxlength:"3","prefix-icon":"el-icon-bottom"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.randomness_backward),1)]})),_:1},8,["modelValue"])]),F,Object(c["m"])("p",null," 顺序执行比例："+Object(c["Q"])(t.randomness_sequential),1),S,Object(c["m"])("div",q,[P,Object(c["m"])(et,{type:"text",placeholder:"指令总数",modelValue:t.instruction_amount_ref,"onUpdate:modelValue":e[13]||(e[13]=function(e){return t.instruction_amount_ref=e}),maxlength:"3","prefix-icon":"el-icon-pie-chart"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.instruction_amount),1)]})),_:1},8,["modelValue"])]),L,Object(c["m"])("div",U,[E,Object(c["m"])(et,{type:"text",placeholder:"向后跳转比例",modelValue:t.frame_amount_ref,"onUpdate:modelValue":e[14]||(e[14]=function(e){return t.frame_amount_ref=e}),maxlength:"2","prefix-icon":"el-icon-files"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.frame_amount),1)]})),_:1},8,["modelValue"])]),R,Object(c["m"])("div",$,[A,Object(c["m"])(et,{type:"text",placeholder:"每页指令数",modelValue:t.page_size_ref,"onUpdate:modelValue":e[15]||(e[15]=function(e){return t.page_size_ref=e}),maxlength:"3","prefix-icon":"el-icon-bottom"},{default:r((function(){return[Object(c["l"])(Object(c["Q"])(t.page_size),1)]})),_:1},8,["modelValue"])]),T,Object(c["m"])("div",H,[Object(c["m"])(Y,{type:"warning",onClick:e[16]||(e[16]=function(e){t.randomnessFormVisible=!1,t.resetByRef()})},{default:r((function(){return[G]})),_:1}),Object(c["m"])(Y,{type:"primary",onClick:e[17]||(e[17]=function(e){t.randomnessFormVisible=!1})},{default:r((function(){return[K]})),_:1})])])]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})})),J=(n("a9e3"),Object(c["fb"])("data-v-77f13687"));Object(c["G"])("data-v-77f13687");var W=Object(c["m"])("div",{class:"h-4"},null,-1),X={class:"flex content-center text-center justify-center text-xl"},Y={class:"pr-8"},Z={class:"pr-8"},tt={class:"mx-auto min-h-full",id:"mid"},et={key:0},nt={key:1},ct=Object(c["l"])(" 使用位: "),it={key:2},ot=Object(c["l"])(" 改变位： "),rt={key:3},st={key:4,class:"text-red-400"},at=Object(c["m"])("div",{class:"h-4"},null,-1),ut={class:"text-xl"},lt={class:"h-8"},dt={class:"flex text-center justify-center content-center"},ft={key:0,class:"el-icon-error",style:{color:"#8e804b"}},mt={key:1,class:"el-icon-success",style:{color:"#f8df70"}},bt={class:"w-20"},_t={key:0,class:"el-icon-position"},ht={key:2,class:"el-icon-warning-outline",style:{color:"#8e804b"}},jt={key:3,class:"el-icon-warning",style:{color:"#f8df70"}};Object(c["E"])();var Ot=J((function(t,e,n,i,o,r){var s=Object(c["M"])("el-header"),a=Object(c["M"])("el-popover"),u=Object(c["M"])("el-main"),l=Object(c["M"])("el-container");return Object(c["D"])(),Object(c["i"])(l,null,{default:J((function(){return[Object(c["m"])(s,null,{default:J((function(){return[W,Object(c["m"])("div",X,[Object(c["m"])("p",Y," 当前执行条数："+Object(c["Q"])(o.inst_count),1),Object(c["m"])("p",Z," 缺页次数："+Object(c["Q"])(o.page_fault_count),1),Object(c["m"])("p",null," 缺页率："+Object(c["Q"])(r.page_fault_rate)+"%",1)])]})),_:1}),Object(c["m"])(u,null,{default:J((function(){return[Object(c["m"])("div",tt,[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["K"])(r.rows,(function(t){return Object(c["D"])(),Object(c["i"])("div",{key:t,class:"flex mx-auto justify-center items-center content-center text-center align-middle gap-4 pb-4 min-h-full"},[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["K"])(Number(t)!==r.rows?r.cols:n.frame_count-(r.rows-1)*r.cols,(function(e){return Object(c["D"])(),Object(c["i"])("div",{key:e,ref:function(n){n&&(o.frame_arr[(t-1)*r.cols+(e-1)]=n)},style:{background:"#"+o.frame_color[(t-1)*r.cols+(e-1)],color:o.text_color[(t-1)*r.cols+(e-1)]},class:"border-solid border rounded-2xl h-40 w-40 content-center",onClick:function(n){return r.pageModify((t-1)*r.cols+(e-1))}},[Object(c["m"])(a,{placement:"bottom",title:"Frame#"+((t-1)*r.cols+(e-1)),width:300,trigger:"hover"},{reference:J((function(){return[Object(c["m"])("div",null,[at,Object(c["m"])("p",{class:"text-md",style:{color:o.active_frame===(t-1)*r.cols+(e-1)?"#f8df70":""}}," Frame# "+Object(c["Q"])((t-1)*r.cols+(e-1)),5),Object(c["m"])("p",ut," Page# "+Object(c["Q"])(o.pages_loaded[(t-1)*r.cols+(e-1)]?o.frame_page[(t-1)*r.cols+(e-1)]:"空闲"),1),Object(c["m"])("p",null," 指令号： "+Object(c["Q"])(o.pages_loaded[(t-1)*r.cols+(e-1)]?o.frame_inst[(t-1)*r.cols+(e-1)]:"无"),1),Object(c["m"])("div",lt,Object(c["Q"])(o.inst_queue.indexOf((t-1)*r.cols+(e-1))>=0?o.inst_queue.indexOf((t-1)*r.cols+(e-1)):""),1),Object(c["m"])("div",dt,[o.used_bits[(t-1)*r.cols+(e-1)]?Object(c["j"])("",!0):(Object(c["D"])(),Object(c["i"])("i",ft)),o.used_bits[(t-1)*r.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("i",mt)):Object(c["j"])("",!0),Object(c["m"])("div",bt,[(t-1)*r.cols+(e-1)===o.clock_pointer?(Object(c["D"])(),Object(c["i"])("i",_t)):Object(c["j"])("",!0)]),o.modified_bits[(t-1)*r.cols+(e-1)]?Object(c["j"])("",!0):(Object(c["D"])(),Object(c["i"])("i",ht)),o.modified_bits[(t-1)*r.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("i",jt)):Object(c["j"])("",!0)])])]})),default:J((function(){return[Object(c["m"])("p",null," 状态："+Object(c["Q"])(o.active_frame===(t-1)*r.cols+(e-1)?"执行":"等待"),1),o.pages_loaded[(t-1)*r.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",et," 来自第# "+Object(c["Q"])(o.frame_page[(t-1)*r.cols+(e-1)])+" 页 ",1)):Object(c["j"])("",!0),o.pages_loaded[(t-1)*r.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",nt,[ct,Object(c["m"])("span",{class:{"text-red-400":o.used_bits[(t-1)*r.cols+(e-1)],"text-green-400":!o.used_bits[(t-1)*r.cols+(e-1)]}},Object(c["Q"])(o.used_bits[(t-1)*r.cols+(e-1)]?"1":"0"),3)])):Object(c["j"])("",!0),o.pages_loaded[(t-1)*r.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",it,[ot,Object(c["m"])("span",{class:{"text-red-400":o.modified_bits[(t-1)*r.cols+(e-1)],"text-green-400":!o.modified_bits[(t-1)*r.cols+(e-1)]}},Object(c["Q"])(o.modified_bits[(t-1)*r.cols+(e-1)]?"1":"0"),3)])):Object(c["j"])("",!0),o.pages_loaded[(t-1)*r.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",rt," 队列中位置："+Object(c["Q"])(o.inst_queue[(t-1)*r.cols+(e-1)]),1)):Object(c["j"])("",!0),o.clock_pointer===(t-1)*r.cols+(e-1)?(Object(c["D"])(),Object(c["i"])("p",st," Clock 指针正指向这一页框！ ")):Object(c["j"])("",!0)]})),_:2},1032,["title"])],12,["onClick"])})),128))])})),128))])]})),_:1})]})),_:1})})),pt=(n("a434"),n("b680"),1),vt=2;Array.prototype.remove=function(t){var e=this.indexOf(t);this.splice(e,1)};var gt={name:"PageView",props:{frame_count:Number},data:function(){return{frame_arr:[],frame_color:[],text_color:[],pages_loaded:[],frame_page:[],frame_inst:[],active_frame:void 0,inst_queue:[],clock_pointer:0,used_bits:[],modified_bits:[],inst_count:0,page_fault_count:0}},methods:{pageModify:function(t){this.pages_loaded[t]&&(this.modified_bits[t]=!this.modified_bits[t])},findLruReplacement:function(){for(var t=0;t<this.frame_count;t++)if(!this.pages_loaded[t])return t;do{console.log("First Scan");for(var e=0;e<this.frame_count;e++){if(!this.used_bits[this.clock_pointer]&&!this.modified_bits[this.clock_pointer]){var n=this.clock_pointer;return this.clockNext(),n}this.clockNext()}console.log("Second Scan");for(var c=0;c<this.frame_count;c++){if(!this.used_bits[this.clock_pointer]){var i=this.clock_pointer;return this.clockNext(),i}this.used_bits[this.clock_pointer]=!1,this.clockNext()}}while(1)},findFifoReplacement:function(){for(var t=0;t<this.frame_count;t++)if(!this.pages_loaded[t])return t;return this.inst_queue[0]},clockNext:function(){this.clock_pointer=(this.clock_pointer+1)%this.frame_count},executeLRU:function(t,e,n){for(var c=-1,i=!1,o=0;o<this.frame_count;o++)this.pages_loaded[o]&&this.frame_page[o]===t&&(c=o);c<0&&(c=this.findLruReplacement(),i=!0,this.page_fault_count++),this.active_frame=c,this.pages_loaded[c]=!0,this.frame_page[c]=t,this.frame_inst[c]=e,this.frame_color[c]=n.c,this.text_color[c]=1===n.t?"white":"black",this.inst_queue.indexOf(c)>=0&&this.inst_queue.remove(c),this.inst_queue.push(c),this.used_bits[c]=!0,i&&(this.modified_bits[c]=!1)},executeFIFO:function(t,e,n){for(var c=-1,i=!1,o=0;o<this.frame_count;o++)this.pages_loaded[o]&&this.frame_page[o]===t&&(c=o);c<0&&(c=this.findFifoReplacement(),i=!0,this.page_fault_count++),this.active_frame=c,this.pages_loaded[c]=!0,this.frame_page[c]=t,this.frame_inst[c]=e,this.frame_color[c]=n.c,this.text_color[c]=1===n.t?"white":"black",this.inst_queue.indexOf(c)>=0&&this.inst_queue.remove(c),this.inst_queue.push(c),this.used_bits[c]=!0,i&&(this.modified_bits[c]=!1)},execute:function(t,e,n,c){this.inst_count++,c===pt?this.executeLRU(t,e,n):c===vt&&this.executeFIFO(t,e,n)},reset:function(){console.log(this.frame_count);for(var t=0;t<this.frame_count;t++)console.log(t),this.frame_color[t]="eeeeee",this.text_color[t]="black",this.pages_loaded[t]=!1,this.frame_inst[t]=0,this.frame_page[t]=0,this.used_bits[t]=!1,this.modified_bits[t]=!1;this.clock_pointer=0,this.inst_queue=[],console.log(this.frame_color),this.page_fault_count=0,this.inst_count=0,this.active_frame=void 0}},computed:{rows:function(){return Math.ceil(this.frame_count/this.cols)},cols:function(){return this.frame_count>16?4:Math.ceil(Math.sqrt(this.frame_count))},page_fault_rate:function(){if(0===this.inst_count)return"0";var t=this.page_fault_count/this.inst_count*100;return t.toFixed(2)}},mounted:function(){this.reset()}};n("3aa0");gt.render=Ot,gt.__scopeId="data-v-77f13687";var xt=gt,yt=Object(c["fb"])("data-v-6161df37");Object(c["G"])("data-v-6161df37");var kt={class:"w-8"},wt={class:"w-24"},Vt={key:0,class:"el-icon-circle-plus"},Mt={key:1,class:"el-icon-circle-check"};Object(c["E"])();var Qt=yt((function(t,e,n,i,o,r){var s=Object(c["M"])("el-menu-item"),a=Object(c["M"])("el-menu");return Object(c["D"])(),Object(c["i"])(a,null,{default:yt((function(){return[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["K"])(n.amount,(function(t){return Object(c["D"])(),Object(c["i"])("div",{class:"instruction",key:t,id:"inst"+t},[Object(c["m"])(s,{disabled:o.inst_list.executed[t-1],onClick:function(e){return r.chooseInstruct(t-1)}},{default:yt((function(){return[Object(c["m"])("div",{class:"flex",style:{"text-decoration":o.inst_list.executed[t-1]?"line-through":""}},[Object(c["m"])("div",kt,Object(c["Q"])(t-1),1),Object(c["m"])("div",wt,Object(c["Q"])(o.typeName[o.inst_list["type"][t-1]]),1),Object(c["m"])("div",{class:"w-18 flex",style:{color:"#"+r.getColor(t-1)}},[Object(c["m"])("p",null,[o.inst_list.executed[t-1]?Object(c["j"])("",!0):(Object(c["D"])(),Object(c["i"])("i",Vt)),o.inst_list.executed[t-1]?(Object(c["D"])(),Object(c["i"])("i",Mt)):Object(c["j"])("",!0),Object(c["l"])(" Page#"+Object(c["Q"])(Math.floor((t-1)/n.frame_size)),1)])],4)],4)]})),_:2},1032,["disabled","onClick"])],8,["id"])})),128))]})),_:1})})),Nt=n("b85c"),It=(n("4de4"),1),zt=2,Dt=0,Ct={name:"InstructionList",props:{amount:Number,frame_size:Number,forward_portion:Number,backward_portion:Number,colors:Array},data:function(){return{inst_list:{type:[],executed:[]},not_executed:[],typeName:["顺序","分支向前","分支向后"]}},methods:{reset_list:function(){for(var t=[],e=0;e<this.amount;e++)e<this.amount/100*this.forward_portion?t.push(It):e<this.amount/100*(this.forward_portion+this.backward_portion)?t.push(zt):t.push(Dt);t.sort((function(){return.5-Math.random()})),this.not_executed=[];for(var n=0;n<this.amount;n++)this.inst_list["type"][n]=t.pop(),this.inst_list["executed"][n]=!1,this.not_executed.push(n)},chooseInstruct:function(t){return this.$emit("choose_inst",t),t},executeInstruct:function(t){return console.log(t),this.inst_list.executed[t]=!0,Math.floor(t/this.frame_size)},getNext:function(t){if(!(t<0||t>this.amount)){var e=this.inst_list.type[t];if(e===It){var n=this.not_executed.filter((function(e){return e<t}));if(0===n.length){var c,i=Object(Nt["a"])(this.not_executed);try{for(i.s();!(c=i.n()).done;){var o=c.value;if(o!==t)return o}}catch(m){i.e(m)}finally{i.f()}return}return n.sort((function(){return.5-Math.random()})),n[0]}if(e===zt){var r=this.not_executed.filter((function(e){return e>t}));if(0===r.length){var s,a=Object(Nt["a"])(this.not_executed);try{for(a.s();!(s=a.n()).done;){var u=s.value;if(u!==t)return u}}catch(m){a.e(m)}finally{a.f()}return}return r.sort((function(){return.5-Math.random()})),r[0]}for(t+=1;t<this.amount;t++)if(this.not_executed.indexOf(t)>=0)return t;var l,d=Object(Nt["a"])(this.not_executed);try{for(d.s();!(l=d.n()).done;){var f=l.value;if(f!==t)return f}}catch(m){d.e(m)}finally{d.f()}}},getColor:function(t){var e=Math.floor(t/this.frame_size),n=this.colors.length;return this.colors[e%n]},didExecute:function(t){this.not_executed.indexOf(t)>=0&&(this.not_executed.remove(t),this.inst_list.executed[t]=!0),console.log("Execute "+t)}},mounted:function(){this.reset_list()}};n("d303");Ct.render=Qt,Ct.__scopeId="data-v-6161df37";var Ft=Ct,St=1,qt=2,Pt=Object(c["n"])({name:"Home",components:{PageView:xt,InstructionList:Ft},props:{page_size:Number,frame_amount:Number,instruction_amount:Number},data:function(){return{current_instruction:Number,next_instruction:Number,randomnessFormVisible:!1,timer:void 0,algo:"1",resetVisible:!1,colors:[{c:"eea2a4",t:qt},{c:"5a191b",t:St},{c:"a61b29",t:St},{c:"894e54",t:St},{c:"c27c88",t:St},{c:"ec7696",t:St},{c:"33141e",t:St},{c:"cc5595",t:St},{c:"681752",t:St},{c:"7e1671",t:St},{c:"302f4b",t:St},{c:"61649f",t:St},{c:"1661ab",t:St},{c:"144a74",t:St},{c:"4e7ca1",t:St},{c:"11659a",t:St},{c:"2f90b9",t:St},{c:"134857",t:St},{c:"63bbd0",t:St},{c:"93d5dc",t:qt},{c:"1ba784",t:St},{c:"57c3c2",t:St},{c:"5dbe8a",t:St},{c:"485b4d",t:St},{c:"43b244",t:St},{c:"fc6315",t:St},{c:"b7511d",t:St},{c:"fa5d19",t:St},{c:"732e12",t:St},{c:"862617",t:St},{c:"483332",t:St},{c:"5e5314",t:St},{c:"55bb8a",t:St},{c:"1f2623",t:St},{c:"cad3c3",t:qt},{c:"f0f5e5",t:qt},{c:"867018",t:qt},{c:"fbecde",t:qt},{c:"f2481b",t:St},{c:"f2b9b2",t:qt}]}},methods:{getNext:function(){return this.$refs.instList.getNext(this.current_instruction)},reset:function(){this.current_instruction="未载入",this.next_instruction=Math.floor(Math.random()*this.instruction_amount),this.$refs.frames.reset(),this.$refs.instList.reset_list()},resetByRef:function(){var t=Number(this.instruction_amount_ref),e=Number(this.page_size_ref),n=Number(this.frame_amount_ref);t&&this.$emit("set_inst_amount",t),e&&this.$emit("set_page_size",e),n&&this.$emit("set_frame_amount",n),this.randomnessFormVisible=!1,setTimeout(this.reset,500)},getPage:function(t){return Math.floor(t/this.page_size)},getColor:function(t){var e=this.colors.length;return this.colors[t%e]},execute:function(){if(void 0===this.next_instruction)return alert("已经执行完毕，请重置或修改随机性"),this.stopTimer(),void(this.current_instruction="已执行完毕");this.current_instruction=this.next_instruction,this.next_instruction=this.getNext(),this.$refs.instList.didExecute(this.current_instruction);var t=this.getPage(this.current_instruction),e=this.getColor(t);this.$refs.frames.execute(t,this.current_instruction,e,Number(this.algo))},continueExecute:function(t){this.timer?(clearInterval(this.timer),this.timer=void 0):this.timer=setInterval(this.execute,t)},stopTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=void 0)},chooseInst:function(t){this.next_instruction=t}},computed:{randomness_forward:{set:function(t){return t=Number(t),t<0?0:t>100?100:(t+this.randomness_backward>100&&(this.randomness_backward=100-t),t)},get:function(){return this.randomness_forward}},randomness_backward:{set:function(t){return t=Number(t),t<0?0:t>100?100:(this.randomness_forward+t>100&&(console.log(t),this.randomness_forward=100-t),t)},get:function(){return this.randomness_backward}},randomness_sequential:function(){return 100-this.randomness_forward-this.randomness_backward}},mounted:function(){this.current_instruction="未载入",this.next_instruction=Math.floor(Math.random()*this.instruction_amount),this.randomness_forward=25,this.randomness_backward=25,this.colors.sort((function(){return.5-Math.random()}))},setup:function(){return{randomness_forward:Object(c["I"])(25),randomness_backward:Object(c["I"])(25),instruction_amount_ref:Object(c["I"])(320),frame_amount_ref:Object(c["I"])(4),page_size_ref:Object(c["I"])(10)}}});n("dd2e");Pt.render=B,Pt.__scopeId="data-v-0bb9156a";var Lt=Pt,Ut={name:"App",components:{Home:Lt},data:function(){return{ps:10,fa:4,ia:320}},methods:{setInstAmount:function(t){this.ia=t},setFrameAmount:function(t){this.fa=t},setPageSize:function(t){this.ps=t}}};n("7ca3");Ut.render=o;var Et=Ut,Rt=n("3fd4"),$t=(n("7dd6"),n("ba8c"),Object(c["h"])(Et));$t.use(Rt["a"]),$t.mount("#app")},"7ca3":function(t,e,n){"use strict";n("c055")},ba8c:function(t,e,n){},c055:function(t,e,n){},d303:function(t,e,n){"use strict";n("e346")},d3c8:function(t,e,n){},d8d0:function(t,e,n){},dd2e:function(t,e,n){"use strict";n("d8d0")},e346:function(t,e,n){}});
//# sourceMappingURL=app.5b5803b3.js.map