(function(t){function e(e){for(var c,o,s=e[0],a=e[1],l=e[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],c=!0,s=1;s<n.length;s++){var a=n[s];0!==i[a]&&(c=!1)}c&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},i={app:0},r=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/OS-Homework-Memory-Allocation/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=a;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1820:function(t,e,n){"use strict";n("5b17")},"22f2":function(t,e,n){},"2cc5":function(t,e,n){"use strict";n("cf3f")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),i={id:"app"};function r(t,e,n,r,o,s){var a=Object(c["M"])("Home");return Object(c["D"])(),Object(c["i"])("div",i,[Object(c["m"])(a,{page_size:o.ps,frame_amount:o.fa,instruction_amount:o.ia,onSet_inst_amount:s.setInstAmount,onSet_frame_amount:s.setFrameAmount,onSet_page_size:s.setPageSize},null,8,["page_size","frame_amount","instruction_amount","onSet_inst_amount","onSet_frame_amount","onSet_page_size"])])}var o=Object(c["fb"])("data-v-9ab9b394");Object(c["G"])("data-v-9ab9b394");var s=Object(c["m"])("div",{class:"h-5"},null,-1),a={class:"flex"},l={class:"pt-2 w-56"},u={class:"pt-2 w-56"},d=Object(c["l"])(" 单步执行 "),f=Object(c["m"])("div",{class:"w-12"},null,-1),b=Object(c["m"])("div",{class:"w-12"},null,-1),m=Object(c["m"])("div",{class:"w-12"},null,-1),_=Object(c["l"])(" 重置"),h=Object(c["m"])("span",null," 确认重置吗？这将会使指令重新生成。",-1),j={class:"dialog-footer"},O=Object(c["l"])("取 消"),p=Object(c["l"])("确 定"),v=Object(c["m"])("div",{class:"w-8"},null,-1),g=Object(c["l"])(" 类LRU（Clock 实现）"),x=Object(c["l"])(" FIFO"),w=Object(c["m"])("div",{class:"h-5"},null,-1),y=Object(c["m"])("div",{class:"w-10"},null,-1),k=Object(c["m"])("div",{class:"w-10"},null,-1),V=Object(c["m"])("div",{class:"w-10"},null,-1),M=Object(c["m"])("div",{class:"w-10"},null,-1),Q=Object(c["m"])("p",{id:"id",class:"text-sm text-gray-400"}," Tongji SSE 2021 OS-Spring ©Zhengyi Zhuo",-1),N={class:"content-center align-middle text-center justify-center"},D={class:"inline-block"},z=Object(c["m"])("label",{class:"text-lg"},"向前跳转比例: ",-1),F=Object(c["m"])("div",{class:"h-10"},null,-1),I={class:"inline-block"},C=Object(c["m"])("label",{class:"text-lg"},"向后跳转比例: ",-1),S=Object(c["m"])("div",{class:"h-10"},null,-1),P=Object(c["m"])("div",{class:"h-10"},null,-1),q={class:"inline-block"},L=Object(c["m"])("label",{class:"text-lg"},"指令总数: ",-1),U=Object(c["m"])("div",{class:"h-10"},null,-1),$={class:"inline-block"},R=Object(c["m"])("label",{class:"text-lg"},"页框数目: ",-1),E=Object(c["m"])("div",{class:"h-10"},null,-1),A={class:"inline-block"},T=Object(c["m"])("label",{class:"text-lg"},"每页指令数: ",-1),H=Object(c["m"])("div",{class:"h-10"},null,-1),B={class:"dialog-footer"},G=Object(c["l"])("确定重置"),K=Object(c["l"])("取消");Object(c["E"])();var J=o((function(t,e,n,i,r,J){var Z=Object(c["M"])("InstructionList"),W=Object(c["M"])("el-aside"),X=Object(c["M"])("PageView"),Y=Object(c["M"])("el-button"),tt=Object(c["M"])("el-dialog"),et=Object(c["M"])("el-radio"),nt=Object(c["M"])("el-input"),ct=Object(c["M"])("el-footer"),it=Object(c["M"])("el-container");return Object(c["D"])(),Object(c["i"])(it,{style:{"max-height":"100%"},id:"page"},{default:o((function(){return[Object(c["m"])(W,{width:"300px"},{default:o((function(){return[Object(c["m"])(Z,{ref:"instList",amount:t.instruction_amount,frame_size:t.page_size,backward_portion:t.randomness_backward,forward_portion:t.randomness_forward,onChoose_inst:t.chooseInst,colors:t.colors},null,8,["amount","frame_size","backward_portion","forward_portion","onChoose_inst","colors"])]})),_:1}),Object(c["m"])(it,null,{default:o((function(){return[Object(c["m"])(X,{frame_count:t.frame_amount,ref:"frames",onReplace:t.replaceHappen},null,8,["frame_count","onReplace"]),Object(c["m"])(ct,null,{default:o((function(){return[s,Object(c["m"])("div",a,[Object(c["m"])("div",l,[Object(c["m"])("a",{href:"#"+t.current_instruction}," 当前指令："+Object(c["Q"])(t.current_instruction),9,["href"])]),Object(c["m"])("div",u," 下条指令："+Object(c["Q"])(t.next_instruction),1),Object(c["m"])(Y,{onClick:e[1]||(e[1]=function(e){t.stopTimer(),t.execute()}),type:"primary"},{default:o((function(){return[d]})),_:1}),f,Object(c["m"])(Y,{onClick:e[2]||(e[2]=function(e){return t.continueExecute(1e3)}),type:t.timer?"success":"default",id:"slow"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.timer?"暂停":"连续执行（慢一点）"),1)]})),_:1},8,["type"]),b,Object(c["m"])(Y,{onClick:e[3]||(e[3]=function(e){return t.continueExecute(100)}),type:t.timer?"success":"default",id:"fast"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.timer?"暂停":"连续执行（快一点）"),1)]})),_:1},8,["type"]),m,Object(c["m"])(Y,{onClick:e[4]||(e[4]=function(e){return t.resetVisible=!0}),type:"danger"},{default:o((function(){return[_]})),_:1}),Object(c["m"])(tt,{title:"确认重置",modelValue:t.resetVisible,"onUpdate:modelValue":e[7]||(e[7]=function(e){return t.resetVisible=e}),width:"30%"},{footer:o((function(){return[Object(c["m"])("span",j,[Object(c["m"])(Y,{onClick:e[5]||(e[5]=function(e){return t.resetVisible=!1})},{default:o((function(){return[O]})),_:1}),Object(c["m"])(Y,{type:"warning",onClick:e[6]||(e[6]=function(e){t.resetVisible=!1,t.reset()})},{default:o((function(){return[p]})),_:1})])]})),default:o((function(){return[h]})),_:1},8,["modelValue"]),v,Object(c["m"])("div",null,[Object(c["m"])(et,{modelValue:t.algo,"onUpdate:modelValue":e[8]||(e[8]=function(e){return t.algo=e}),label:"1"},{default:o((function(){return[g]})),_:1},8,["modelValue"]),Object(c["m"])(et,{modelValue:t.algo,"onUpdate:modelValue":e[9]||(e[9]=function(e){return t.algo=e}),label:"2"},{default:o((function(){return[x]})),_:1},8,["modelValue"])])]),w,Object(c["m"])("div",{class:"flex",onClick:e[10]||(e[10]=function(e){return t.randomnessFormVisible=!0}),id:"attribute"},[Object(c["m"])("p",null,"顺序执行｜向前跳转｜向后跳转： "+Object(c["Q"])(t.randomness_sequential+"%｜"+t.randomness_forward+"%｜"+t.randomness_backward+"%"),1),y,Object(c["m"])("p",null," 指令总数："+Object(c["Q"])(t.instruction_amount),1),k,Object(c["m"])("p",null," 页框数目："+Object(c["Q"])(t.frame_amount),1),V,Object(c["m"])("p",null," 每页指令数："+Object(c["Q"])(t.page_size),1),M,Object(c["m"])("p",null," 该进程所占页数："+Object(c["Q"])(Math.ceil(t.instruction_amount/t.page_size)),1)]),Q,Object(c["m"])(tt,{title:"调整指令随机性",modelValue:t.randomnessFormVisible,"onUpdate:modelValue":e[18]||(e[18]=function(e){return t.randomnessFormVisible=e})},{default:o((function(){return[Object(c["m"])("div",N,[Object(c["m"])("div",D,[z,Object(c["m"])(nt,{type:"text",placeholder:"向前跳转比例",modelValue:t.randomness_forward,"onUpdate:modelValue":e[11]||(e[11]=function(e){return t.randomness_forward=e}),maxlength:"3","prefix-icon":"el-icon-top"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.randomness_forward),1)]})),_:1},8,["modelValue"])]),F,Object(c["m"])("div",I,[C,Object(c["m"])(nt,{type:"text",placeholder:"向后跳转比例",modelValue:t.randomness_backward,"onUpdate:modelValue":e[12]||(e[12]=function(e){return t.randomness_backward=e}),maxlength:"3","prefix-icon":"el-icon-bottom"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.randomness_backward),1)]})),_:1},8,["modelValue"])]),S,Object(c["m"])("p",null," 顺序执行比例："+Object(c["Q"])(t.randomness_sequential),1),P,Object(c["m"])("div",q,[L,Object(c["m"])(nt,{type:"text",placeholder:"指令总数",modelValue:t.instruction_amount_ref,"onUpdate:modelValue":e[13]||(e[13]=function(e){return t.instruction_amount_ref=e}),maxlength:"3","prefix-icon":"el-icon-pie-chart"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.instruction_amount),1)]})),_:1},8,["modelValue"])]),U,Object(c["m"])("div",$,[R,Object(c["m"])(nt,{type:"text",placeholder:"向后跳转比例",modelValue:t.frame_amount_ref,"onUpdate:modelValue":e[14]||(e[14]=function(e){return t.frame_amount_ref=e}),maxlength:"2","prefix-icon":"el-icon-files"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.frame_amount),1)]})),_:1},8,["modelValue"])]),E,Object(c["m"])("div",A,[T,Object(c["m"])(nt,{type:"text",placeholder:"每页指令数",modelValue:t.page_size_ref,"onUpdate:modelValue":e[15]||(e[15]=function(e){return t.page_size_ref=e}),maxlength:"3","prefix-icon":"el-icon-bottom"},{default:o((function(){return[Object(c["l"])(Object(c["Q"])(t.page_size),1)]})),_:1},8,["modelValue"])]),H,Object(c["m"])("div",B,[Object(c["m"])(Y,{type:"warning",onClick:e[16]||(e[16]=function(e){t.randomnessFormVisible=!1,t.resetByRef()})},{default:o((function(){return[G]})),_:1}),Object(c["m"])(Y,{type:"primary",onClick:e[17]||(e[17]=function(e){t.randomnessFormVisible=!1})},{default:o((function(){return[K]})),_:1})])])]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})})),Z=(n("a9e3"),Object(c["fb"])("data-v-355b1769"));Object(c["G"])("data-v-355b1769");var W=Object(c["m"])("div",{class:"h-4"},null,-1),X={class:"flex content-center text-center justify-center text-lg"},Y={class:"pr-8"},tt={class:"pr-8"},et={class:"mx-auto min-h-full",id:"mid"},nt={key:0,id:"row1"},ct={key:1,id:"row2"},it={key:2,id:"row3"},rt={key:3,id:"row4"},ot={key:0},st={key:1},at=Object(c["l"])(" 使用位: "),lt={key:2},ut=Object(c["l"])(" 改变位： "),dt={key:3},ft={key:4,class:"text-red-400"},bt=Object(c["m"])("div",{class:"h-4"},null,-1),mt={class:"text-xl"},_t={class:"h-8"},ht={class:"flex text-center justify-center content-center"},jt={key:0,class:"el-icon-error",style:{color:"#ae804b"}},Ot={key:1,class:"el-icon-success",style:{color:"#f8df70"}},pt={class:"w-20 content-center text-center justify-center flex"},vt=Object(c["m"])("div",{class:"w-1/12"},null,-1),gt={key:0,class:"w-4"},xt=Object(c["m"])("svg",{class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},[Object(c["m"])("path",{d:"M553.5 908.2c-1.2 0-2.2-0.1-3.5-0.2-10.9-1.5-19.5-10.1-21.1-21.1l-48.1-343.7L137.6 495c-11-1.5-19.5-10.1-21.1-21.1s4.3-21.6 14.5-26.1l741.8-329.9c9.4-4.1 20.3-2.1 27.6 5.1 7.3 7.3 9.3 18.2 5.1 27.6l-329.4 743c-4.1 9-13 14.6-22.6 14.6z",fill:"red"})],-1),wt={key:2,class:"el-icon-warning-outline",style:{color:"#ae804b"}},yt={key:3,class:"el-icon-warning",style:{color:"#f8df70"}};Object(c["E"])();var kt=Z((function(t,e,n,i,r,o){var s=Object(c["M"])("el-header"),a=Object(c["M"])("el-popover"),l=Object(c["M"])("el-main"),u=Object(c["M"])("el-container");return Object(c["D"])(),Object(c["i"])(u,null,{default:Z((function(){return[Object(c["m"])(s,null,{default:Z((function(){return[W,Object(c["m"])("div",X,[Object(c["m"])("p",Y," 当前执行条数："+Object(c["Q"])(r.inst_count),1),Object(c["m"])("p",tt," 缺页次数："+Object(c["Q"])(r.page_fault_count),1),Object(c["m"])("p",null," 缺页率："+Object(c["Q"])(o.page_fault_rate)+"%",1)])]})),_:1}),Object(c["m"])(l,null,{default:Z((function(){return[Object(c["m"])("div",et,[1===o.rows?(Object(c["D"])(),Object(c["i"])("div",nt)):Object(c["j"])("",!0),2===o.rows?(Object(c["D"])(),Object(c["i"])("div",ct)):Object(c["j"])("",!0),3===o.rows?(Object(c["D"])(),Object(c["i"])("div",it)):Object(c["j"])("",!0),4===o.rows?(Object(c["D"])(),Object(c["i"])("div",rt)):Object(c["j"])("",!0),(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["K"])(o.rows,(function(t){return Object(c["D"])(),Object(c["i"])("div",{key:t,class:"flex mx-auto justify-center items-center content-center text-center align-middle gap-4 pb-4 min-h-full"},[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["K"])(Number(t)!==o.rows?o.cols:n.frame_count-(o.rows-1)*o.cols,(function(e){return Object(c["D"])(),Object(c["i"])("div",{key:e,ref:function(n){n&&(r.frame_arr[(t-1)*o.cols+(e-1)]=n)},style:{background:"#"+r.frame_color[(t-1)*o.cols+(e-1)]+"aa",color:r.text_color[(t-1)*o.cols+(e-1)],"backdrop-filter":"blur(20px)"},class:"rounded-2xl h-40 w-40 content-center shadow-md",onClick:function(n){return o.pageModify((t-1)*o.cols+(e-1))}},[Object(c["m"])(a,{placement:"bottom",title:"Frame#"+((t-1)*o.cols+(e-1)),width:300,trigger:"hover"},{reference:Z((function(){return[Object(c["m"])("div",null,[bt,Object(c["m"])("p",{class:"text-md",style:{color:r.active_frame===(t-1)*o.cols+(e-1)?"#f8df70":""}}," Frame# "+Object(c["Q"])((t-1)*o.cols+(e-1)),5),Object(c["m"])("p",mt," Page# "+Object(c["Q"])(r.pages_loaded[(t-1)*o.cols+(e-1)]?r.frame_page[(t-1)*o.cols+(e-1)]:"空闲"),1),Object(c["m"])("p",null," 指令号： "+Object(c["Q"])(r.pages_loaded[(t-1)*o.cols+(e-1)]?r.frame_inst[(t-1)*o.cols+(e-1)]:"无"),1),Object(c["m"])("div",_t,Object(c["Q"])(r.inst_queue.indexOf((t-1)*o.cols+(e-1))>=0?r.inst_queue.indexOf((t-1)*o.cols+(e-1)):""),1),Object(c["m"])("div",ht,[r.used_bits[(t-1)*o.cols+(e-1)]?Object(c["j"])("",!0):(Object(c["D"])(),Object(c["i"])("i",jt)),r.used_bits[(t-1)*o.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("i",Ot)):Object(c["j"])("",!0),Object(c["m"])("div",pt,[vt,(t-1)*o.cols+(e-1)===r.clock_pointer?(Object(c["D"])(),Object(c["i"])("i",gt,[xt])):Object(c["j"])("",!0)]),r.modified_bits[(t-1)*o.cols+(e-1)]?Object(c["j"])("",!0):(Object(c["D"])(),Object(c["i"])("i",wt)),r.modified_bits[(t-1)*o.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("i",yt)):Object(c["j"])("",!0)])])]})),default:Z((function(){return[Object(c["m"])("p",null," 状态："+Object(c["Q"])(r.active_frame===(t-1)*o.cols+(e-1)?"执行":"等待"),1),r.pages_loaded[(t-1)*o.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",ot," 来自第# "+Object(c["Q"])(r.frame_page[(t-1)*o.cols+(e-1)])+" 页 ",1)):Object(c["j"])("",!0),r.pages_loaded[(t-1)*o.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",st,[at,Object(c["m"])("span",{class:{"text-red-400":r.used_bits[(t-1)*o.cols+(e-1)],"text-green-400":!r.used_bits[(t-1)*o.cols+(e-1)]}},Object(c["Q"])(r.used_bits[(t-1)*o.cols+(e-1)]?"1":"0"),3)])):Object(c["j"])("",!0),r.pages_loaded[(t-1)*o.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",lt,[ut,Object(c["m"])("span",{class:{"text-red-400":r.modified_bits[(t-1)*o.cols+(e-1)],"text-green-400":!r.modified_bits[(t-1)*o.cols+(e-1)]}},Object(c["Q"])(r.modified_bits[(t-1)*o.cols+(e-1)]?"1":"0"),3)])):Object(c["j"])("",!0),r.pages_loaded[(t-1)*o.cols+(e-1)]?(Object(c["D"])(),Object(c["i"])("p",dt," 队列中位置："+Object(c["Q"])(r.inst_queue[(t-1)*o.cols+(e-1)]),1)):Object(c["j"])("",!0),r.clock_pointer===(t-1)*o.cols+(e-1)?(Object(c["D"])(),Object(c["i"])("p",ft," Clock 指针正指向这一页框！ ")):Object(c["j"])("",!0)]})),_:2},1032,["title"])],12,["onClick"])})),128))])})),128))])]})),_:1})]})),_:1})})),Vt=(n("a434"),n("b680"),1),Mt=2;Array.prototype.remove=function(t){var e=this.indexOf(t);this.splice(e,1)};var Qt={name:"PageView",props:{frame_count:Number},data:function(){return{frame_arr:[],frame_color:[],text_color:[],pages_loaded:[],frame_page:[],frame_inst:[],active_frame:void 0,inst_queue:[],clock_pointer:0,used_bits:[],modified_bits:[],inst_count:0,page_fault_count:0}},methods:{pageModify:function(t){this.pages_loaded[t]&&(this.modified_bits[t]=!this.modified_bits[t])},findLruReplacement:function(){for(var t=0;t<this.frame_count;t++)if(!this.pages_loaded[t])return t;do{console.log("First Scan");for(var e=0;e<this.frame_count;e++){if(!this.used_bits[this.clock_pointer]&&!this.modified_bits[this.clock_pointer]){var n=this.clock_pointer;return this.clockNext(),n}this.clockNext()}console.log("Second Scan");for(var c=0;c<this.frame_count;c++){if(!this.used_bits[this.clock_pointer]){var i=this.clock_pointer;return this.clockNext(),i}this.used_bits[this.clock_pointer]=!1,this.clockNext()}}while(1)},findFifoReplacement:function(){for(var t=0;t<this.frame_count;t++)if(!this.pages_loaded[t])return t;return this.inst_queue[0]},clockNext:function(){this.clock_pointer=(this.clock_pointer+1)%this.frame_count},executeLRU:function(t,e,n){for(var c=-1,i=!1,r=0;r<this.frame_count;r++)this.pages_loaded[r]&&this.frame_page[r]===t&&(c=r);c<0&&(c=this.findLruReplacement(),i=!0,this.$emit("replace",e),this.page_fault_count++),this.active_frame=c,this.pages_loaded[c]=!0,this.frame_page[c]=t,this.frame_inst[c]=e,this.frame_color[c]=n.c,this.text_color[c]=1===n.t?"white":"black",this.inst_queue.indexOf(c)>=0&&this.inst_queue.remove(c),this.inst_queue.push(c),this.used_bits[c]=!0,i&&(this.modified_bits[c]=!1)},executeFIFO:function(t,e,n){for(var c=-1,i=!1,r=0;r<this.frame_count;r++)this.pages_loaded[r]&&this.frame_page[r]===t&&(c=r);c<0&&(c=this.findFifoReplacement(),i=!0,this.$emit("replace",e),this.page_fault_count++),this.active_frame=c,this.pages_loaded[c]=!0,this.frame_page[c]=t,this.frame_inst[c]=e,this.frame_color[c]=n.c,this.text_color[c]=1===n.t?"white":"black",this.inst_queue.indexOf(c)>=0&&this.inst_queue.remove(c),this.inst_queue.push(c),this.used_bits[c]=!0,i&&(this.modified_bits[c]=!1)},execute:function(t,e,n,c){this.inst_count++,c===Vt?this.executeLRU(t,e,n):c===Mt&&this.executeFIFO(t,e,n)},reset:function(){console.log(this.frame_count);for(var t=0;t<this.frame_count;t++)console.log(t),this.frame_color[t]="eeeeee",this.text_color[t]="black",this.pages_loaded[t]=!1,this.frame_inst[t]=0,this.frame_page[t]=0,this.used_bits[t]=!1,this.modified_bits[t]=!1;this.clock_pointer=0,this.inst_queue=[],console.log(this.frame_color),this.page_fault_count=0,this.inst_count=0,this.active_frame=void 0}},computed:{rows:function(){return Math.ceil(this.frame_count/this.cols)},cols:function(){return this.frame_count>16?4:Math.ceil(Math.sqrt(this.frame_count))},page_fault_rate:function(){if(0===this.inst_count)return"0";var t=this.page_fault_count/this.inst_count*100;return t.toFixed(2)}},mounted:function(){this.reset()}};n("8760");Qt.render=kt,Qt.__scopeId="data-v-355b1769";var Nt=Qt,Dt=Object(c["fb"])("data-v-4e275ce7");Object(c["G"])("data-v-4e275ce7");var zt={class:"w-8"},Ft={class:"w-24"},It={key:0,class:"el-icon-circle-plus"},Ct={key:1,class:"el-icon-circle-check"},St={key:0,class:"text-red-400",id:"pf"};Object(c["E"])();var Pt=Dt((function(t,e,n,i,r,o){var s=Object(c["M"])("el-menu-item"),a=Object(c["M"])("el-menu");return Object(c["D"])(),Object(c["i"])(a,{id:"menu"},{default:Dt((function(){return[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["K"])(n.amount,(function(t){return Object(c["D"])(),Object(c["i"])("div",{class:"instruction",key:t,id:"inst"+t},[Object(c["m"])(s,{disabled:r.inst_list.executed[t-1],onClick:function(e){return o.chooseInstruct(t-1)}},{default:Dt((function(){return[Object(c["m"])("div",{class:"flex",style:{"text-decoration":r.inst_list.executed[t-1]?"line-through":""}},[Object(c["m"])("div",zt,Object(c["Q"])(t-1),1),Object(c["m"])("div",Ft,Object(c["Q"])(r.typeName[r.inst_list["type"][t-1]]),1),Object(c["m"])("div",{class:"w-24 flex",style:{color:r.inst_list.executed[t-1]?"black":"#"+o.getColor(t-1).c}},[Object(c["m"])("p",null,[r.inst_list.executed[t-1]?Object(c["j"])("",!0):(Object(c["D"])(),Object(c["i"])("i",It)),r.inst_list.executed[t-1]?(Object(c["D"])(),Object(c["i"])("i",Ct)):Object(c["j"])("",!0),Object(c["l"])(" Page#"+Object(c["Q"])(Math.floor((t-1)/n.frame_size)),1)])],4)],4),r.inst_list.page_fault[t-1]?(Object(c["D"])(),Object(c["i"])("span",St," PF ")):Object(c["j"])("",!0)]})),_:2},1032,["disabled","onClick"])],8,["id"])})),128))]})),_:1})})),qt=n("b85c"),Lt=(n("4de4"),1),Ut=2,$t=0,Rt={name:"InstructionList",props:{amount:Number,frame_size:Number,forward_portion:Number,backward_portion:Number,colors:Array},data:function(){return{inst_list:{type:[],executed:[],page_fault:[]},not_executed:[],typeName:["顺序","分支向前","分支向后"]}},methods:{reset_list:function(){for(var t=[],e=0;e<this.amount;e++)e<this.amount/100*this.forward_portion?t.push(Lt):e<this.amount/100*(this.forward_portion+this.backward_portion)?t.push(Ut):t.push($t);t.sort((function(){return.5-Math.random()})),this.not_executed=[];for(var n=0;n<this.amount;n++)this.inst_list["type"][n]=t.pop(),this.inst_list["executed"][n]=!1,this.inst_list.page_fault[n]=!1,this.not_executed.push(n)},chooseInstruct:function(t){return this.$emit("choose_inst",t),t},executeInstruct:function(t){return console.log(t),this.inst_list.executed[t]=!0,Math.floor(t/this.frame_size)},getNext:function(t){if(!(t<0||t>this.amount)){var e=this.inst_list.type[t];if(e===Lt){var n=this.not_executed.filter((function(e){return e<t}));if(0===n.length){var c,i=Object(qt["a"])(this.not_executed);try{for(i.s();!(c=i.n()).done;){var r=c.value;if(r!==t)return r}}catch(b){i.e(b)}finally{i.f()}return}return n.sort((function(){return.5-Math.random()})),n[0]}if(e===Ut){var o=this.not_executed.filter((function(e){return e>t}));if(0===o.length){var s,a=Object(qt["a"])(this.not_executed);try{for(a.s();!(s=a.n()).done;){var l=s.value;if(l!==t)return l}}catch(b){a.e(b)}finally{a.f()}return}return o.sort((function(){return.5-Math.random()})),o[0]}for(t+=1;t<this.amount;t++)if(this.not_executed.indexOf(t)>=0)return t;var u,d=Object(qt["a"])(this.not_executed);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(f!==t)return f}}catch(b){d.e(b)}finally{d.f()}}},getColor:function(t){var e=Math.floor(t/this.frame_size),n=this.colors.length;return this.colors[e%n]},didExecute:function(t){this.not_executed.indexOf(t)>=0&&(this.not_executed.remove(t),this.inst_list.executed[t]=!0),console.log("Execute "+t)},didPageFault:function(t){this.inst_list.page_fault[t]=!0}},mounted:function(){this.reset_list()}};n("1820");Rt.render=Pt,Rt.__scopeId="data-v-4e275ce7";var Et=Rt,At=1,Tt=2,Ht=Object(c["n"])({name:"Home",components:{PageView:Nt,InstructionList:Et},props:{page_size:Number,frame_amount:Number,instruction_amount:Number},data:function(){return{current_instruction:Number,next_instruction:Number,randomnessFormVisible:!1,timer:void 0,algo:"1",resetVisible:!1,colors:[{c:"eea2a4",t:Tt},{c:"5a191b",t:At},{c:"a61b29",t:At},{c:"894e54",t:At},{c:"c27c88",t:At},{c:"ec7696",t:At},{c:"33141e",t:At},{c:"cc5595",t:At},{c:"681752",t:At},{c:"7e1671",t:At},{c:"302f4b",t:At},{c:"61649f",t:At},{c:"1661ab",t:At},{c:"144a74",t:At},{c:"4e7ca1",t:At},{c:"11659a",t:At},{c:"2f90b9",t:At},{c:"134857",t:At},{c:"63bbd0",t:At},{c:"93d5dc",t:Tt},{c:"1ba784",t:At},{c:"57c3c2",t:At},{c:"5dbe8a",t:At},{c:"485b4d",t:At},{c:"43b244",t:At},{c:"fc6315",t:At},{c:"b7511d",t:At},{c:"fa5d19",t:At},{c:"732e12",t:At},{c:"862617",t:At},{c:"483332",t:At},{c:"5e5314",t:At},{c:"55bb8a",t:At},{c:"1f2623",t:At},{c:"cad3c3",t:Tt},{c:"f0f5e5",t:Tt},{c:"867018",t:Tt},{c:"fbecde",t:Tt},{c:"f2481b",t:At},{c:"f2b9b2",t:Tt}]}},methods:{getNext:function(){return this.$refs.instList.getNext(this.current_instruction)},reset:function(){this.current_instruction="未载入",this.next_instruction=Math.floor(Math.random()*this.instruction_amount),this.$refs.frames.reset(),this.$refs.instList.reset_list()},resetByRef:function(){var t=Number(this.instruction_amount_ref),e=Number(this.page_size_ref),n=Number(this.frame_amount_ref);t&&this.$emit("set_inst_amount",t),e&&this.$emit("set_page_size",e),n&&this.$emit("set_frame_amount",n),this.randomnessFormVisible=!1,setTimeout(this.reset,500)},getPage:function(t){return Math.floor(t/this.page_size)},getColor:function(t){var e=this.colors.length;return this.colors[t%e]},execute:function(){if(void 0===this.next_instruction)return alert("已经执行完毕，请重置或修改随机性"),this.stopTimer(),void(this.current_instruction="已执行完毕");this.current_instruction=this.next_instruction,this.next_instruction=this.getNext(),this.$refs.instList.didExecute(this.current_instruction);var t=this.getPage(this.current_instruction),e=this.getColor(t);this.$refs.frames.execute(t,this.current_instruction,e,Number(this.algo))},continueExecute:function(t){this.timer?(clearInterval(this.timer),this.timer=void 0):this.timer=setInterval(this.execute,t)},stopTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=void 0)},chooseInst:function(t){this.next_instruction=t},replaceHappen:function(t){this.$refs.instList.didPageFault(t)}},computed:{randomness_forward:{set:function(t){return t=Number(t),t<0?0:t>100?100:(t+this.randomness_backward>100&&(this.randomness_backward=100-t),t)},get:function(){return this.randomness_forward}},randomness_backward:{set:function(t){return t=Number(t),t<0?0:t>100?100:(this.randomness_forward+t>100&&(console.log(t),this.randomness_forward=100-t),t)},get:function(){return this.randomness_backward}},randomness_sequential:function(){return 100-this.randomness_forward-this.randomness_backward}},mounted:function(){this.current_instruction="未载入",this.next_instruction=Math.floor(Math.random()*this.instruction_amount),this.randomness_forward=25,this.randomness_backward=25,this.colors.sort((function(){return.5-Math.random()}))},setup:function(){return{randomness_forward:Object(c["I"])(25),randomness_backward:Object(c["I"])(25),instruction_amount_ref:Object(c["I"])(320),frame_amount_ref:Object(c["I"])(4),page_size_ref:Object(c["I"])(10)}}});n("2cc5");Ht.render=J,Ht.__scopeId="data-v-9ab9b394";var Bt=Ht,Gt={name:"App",components:{Home:Bt},data:function(){return{ps:10,fa:4,ia:320}},methods:{setInstAmount:function(t){this.ia=t},setFrameAmount:function(t){this.fa=t},setPageSize:function(t){this.ps=t}}};n("6241");Gt.render=r;var Kt=Gt,Jt=n("3fd4"),Zt=(n("7dd6"),n("ba8c"),Object(c["h"])(Kt));Zt.use(Jt["a"]),Zt.mount("#app")},"5b17":function(t,e,n){},6241:function(t,e,n){"use strict";n("22f2")},8760:function(t,e,n){"use strict";n("bb58")},ba8c:function(t,e,n){},bb58:function(t,e,n){},cf3f:function(t,e,n){}});
//# sourceMappingURL=app.bc30d1d6.js.map